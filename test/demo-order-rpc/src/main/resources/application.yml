spring:
  application:
    name: order-service

# gRPC 服务端（本服务）
grpc:
  server:
    port: ${GRPC_SERVER_PORT:8082}

  # 直接把完整地址做成一个环境变量，最省事
  # 本地默认 localhost:8082；在 ECS 注入 test 环境地址即可
  client:
    user-service:
      address: static://localhost:8081
      negotiationType: plaintext

logging:
  level:
    com.ddm.demo: DEBUG
    com.ddm.argus: DEBUG
    net.devh.boot.grpc: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [%X{lane:--}] [%X{traceId:--}] %logger{36} - %msg%n"

---

spring:
  config:
    activate:
      on-profile: test

grpc:
  server:
    port: 8081
  client:
    user-service:
      # 部署在 ECS/Cloud Map 的地址
      address: "cloud:///user.test.local:${GRPC_SERVER_PORT:8081}"